webpackJsonp([4],{gpvR:function(e,t){},rb7W:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),a=i("NYxO"),c=i("M4fF"),o=i.n(c),r=i("Ea+1"),l=i("znnA"),u=i("A/UQ"),g=i("IcnI");console.log(u.a);var f={data:function(){return{videoTime:0,currentCar:null,carList:[],liveDisItms:[],catSettingList:[{settingCode:"SHOWVEDIO",settingName:"是否显示视频"},{settingCode:"SHOWGOODS",settingName:"是否显示货物"},{settingCode:"SHOWTEM",settingName:"是否显示温度"}]}},components:{},watch:{configList:function(){this.getVideoTime()}},computed:s()({},Object(a.b)(["globalParams"]),{configList:function(){return this.globalParams.configList},configMap:function(){return this.globalParams.configMap}}),created:function(){this.getCarList(),this.getVideoTime()},methods:{getVideoTime:function(){var e=0;this.configList.forEach(function(t){t.settingCode===u.a.VIDEO_PLAY_TIME&&(e=parseInt(t.value))}),this.videoTime=e},getCarList:function(){var e=this;r.a.main.getVehicles().then(function(t){var i=t.data;e.carList=i.data||[]}).catch(function(){return l.a.error("全局数据获取失败,请刷新重试~")})},onCarChange:function(e){var t=this;this.liveDisItms=[],this.carList.forEach(function(i){i.licenseNumber===e&&i.vehicleSettingModelList.forEach(function(e){e.value&&t.liveDisItms.push(e.settingName)})})},onCarSet:function(){var e=this;if(this.currentCar){var t={licenseNumber:this.currentCar,settingModels:[]};this.catSettingList.forEach(function(i){var n=i.settingCode,s=i.settingName;t.settingModels.push({settingCode:n,settingName:s,value:-1!==e.liveDisItms.indexOf(i.settingName)||""})}),r.a.config.setCarSetting(t).then(function(t){t.data;e.$message({message:"配置成功",type:"success",center:!0}),e.getCarList()})}},onConfigSet:function(){var e=this,t=o.a.cloneDeep(this.configMap.videoPlayTime);t.value=this.videoTime,g.a.dispatch("updateConfigMap",{key:"videoPlayTime",config:t}),r.a.config.setGloblConfig(this.configList).then(function(){e.$message({message:"配置成功",type:"success",center:!0})})}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"car-config-wrap"},[i("div",{staticClass:"config-item"},[i("span",{staticClass:"text"},[e._v("实时车辆显示内容:")]),i("el-select",{attrs:{placeholder:"选择车辆..."},on:{change:function(t){e.onCarChange(e.currentCar)}},model:{value:e.currentCar,callback:function(t){e.currentCar=t},expression:"currentCar"}},e._l(e.carList,function(e){return i("el-option",{key:e.licenseNumber,attrs:{label:e.licenseNumber,value:e.licenseNumber}})})),i("div",{staticClass:"select"},[i("el-checkbox-group",{model:{value:e.liveDisItms,callback:function(t){e.liveDisItms=t},expression:"liveDisItms"}},e._l(e.catSettingList,function(e,t){return i("el-checkbox",{key:t,attrs:{label:e.settingName,value:e.settingCode}})}))],1),i("el-button",{attrs:{type:"primary",disabled:!e.currentCar},on:{click:function(t){e.onCarSet()}}},[e._v("提交")])],1),i("div",{staticClass:"config-item video-config"},[i("span",{staticClass:"text"},[e._v("视频播放时长:")]),i("div",{staticClass:"select"},[i("el-input-number",{attrs:{label:"视频播放时长"},model:{value:e.videoTime,callback:function(t){e.videoTime=t},expression:"videoTime"}})],1),i("el-button",{attrs:{type:"primary"},on:{click:e.onConfigSet}},[e._v("提交")])],1)])},staticRenderFns:[]};var v=i("VU/8")(f,m,!1,function(e){i("gpvR")},null,null);t.default=v.exports}});
//# sourceMappingURL=4.e150135d29719c428cd4.js.map