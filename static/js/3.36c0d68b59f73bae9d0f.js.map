{"version":3,"sources":["webpack:///src/pages/CarConfig.vue","webpack:///./src/pages/CarConfig.vue?f21c","webpack:///./src/pages/CarConfig.vue"],"names":["console","log","constant","CarConfig","data","videoTime","currentCar","carList","liveDisItms","catSettingList","settingCode","settingName","components","watch","configList","this","getVideoTime","computed","extends_default","Object","vuex_esm","globalParams","configMap","created","getCarList","methods","result","forEach","item","VIDEO_PLAY_TIME","parseInt","value","_this","api","main","getVehicles","then","_ref","catch","message","error","onCarChange","licenseNumber","_this2","vehicleSettingModelList","set","push","onCarSet","_this3","params","settingModels","indexOf","config","setCarSetting","_ref2","$message","type","center","onConfigSet","_this4","lodash_default","a","cloneDeep","videoPlayTime","store","dispatch","key","setGloblConfig","pages_CarConfig","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","placeholder","on","change","$event","model","callback","$$v","expression","_l","label","index","disabled","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.36c0d68b59f73bae9d0f.js","sourcesContent":["<template lang=\"pug\">\n  div.car-config-wrap\n    div.config-item\n      span.text 实时车辆显示内容:\n      el-select(v-model=\"currentCar\" placeholder=\"选择车辆...\" @change=\"onCarChange(currentCar)\")\n        el-option(v-for=\"item in carList\" :key=\"item.licenseNumber\" :label=\"item.licenseNumber\" :value=\"item.licenseNumber\")\n      .select\n        el-checkbox-group(v-model=\"liveDisItms\")\n          el-checkbox(:label=\"item.settingName\" :value=\"item.settingCode\" v-for=\"(item, index) in catSettingList\" :key=\"index\")\n      el-button(type=\"primary\" @click=\"onCarSet()\" :disabled=\"!currentCar\") 提交\n    div.config-item.video-config\n      span.text 视频播放时长:\n      .select\n        el-input-number(v-model=\"videoTime\" label=\"视频播放时长\")\n      el-button(type=\"primary\" @click=\"onConfigSet\") 提交\n</template>\n\n<script>\n  import {mapGetters} from 'vuex';\n  import _ from 'lodash';\n  import api from 'api';\n  import message from 'util/message'\n  import {globConfigMap} from 'constant';\n  import store from 'store';\n\n  console.log(globConfigMap);\n\n  export default {\n    data () {\n      return {\n        videoTime: 0,\n        currentCar: null,\n        carList: [],\n        liveDisItms: [],\n        catSettingList: [\n          {\n            settingCode: 'SHOWVEDIO',\n            settingName: '是否显示视频',\n          },\n          {\n            settingCode: 'SHOWGOODS',\n            settingName: '是否显示货物',\n          },\n          {\n            settingCode: 'SHOWTEM',\n            settingName: '是否显示温度',\n          },\n        ]\n      }\n    },\n    components: {\n    },\n    watch: {\n     configList(){\n       this.getVideoTime();\n     },\n    },\n    computed:{\n      ...mapGetters([\n        'globalParams',\n      ]),\n      configList(){\n        return this.globalParams.configList;\n      },\n      configMap(){\n        return this.globalParams.configMap;\n      },\n    },\n    created(){\n      this.getCarList();\n      this.getVideoTime();\n    },\n    methods:{\n      getVideoTime(){\n        let result = 0;\n        this.configList.forEach((item) => {\n          if(item.settingCode === globConfigMap.VIDEO_PLAY_TIME){\n            result = parseInt(item.value);\n          }\n        });\n        this.videoTime = result;\n      },\n      getCarList(){\n        api.main.getVehicles()\n          .then(({data}) => {\n            this.carList = data.data || [];\n          })\n          .catch(() => message.error('全局数据获取失败,请刷新重试~'));\n      },\n      onCarChange(licenseNumber){\n        this.liveDisItms = [];\n        this.carList.forEach((item) => {\n          if(item.licenseNumber === licenseNumber){\n            item.vehicleSettingModelList.forEach((set) => {\n              set.value && this.liveDisItms.push(set.settingName);\n            })\n          }\n        });\n      },\n      onCarSet(){\n        if(!this.currentCar) return;\n        let params = {\n          licenseNumber: this.currentCar,\n          settingModels: [],\n        };\n        this.catSettingList.forEach((item) => {\n          const {settingCode, settingName} = item;\n          params.settingModels.push({\n            settingCode,\n            settingName,\n            value: this.liveDisItms.indexOf(item.settingName) === -1 ? '' : true,\n          });\n        });\n        api.config.setCarSetting(params)\n          .then(({data}) => {\n            this.$message({\n              message: '配置成功',\n              type: 'success',\n              center: true\n            });\n            this.getCarList();\n          });\n      },\n      onConfigSet(){\n        let config = _.cloneDeep(this.configMap.videoPlayTime);\n        config.value = this.videoTime;\n        store.dispatch('updateConfigMap', {key: 'videoPlayTime', config});\n        api.config.setGloblConfig(this.configList)\n          .then(() => {\n            this.$message({\n              message: '配置成功',\n              type: 'success',\n              center: true\n            });\n          });\n      },\n    },\n  }\n</script>\n<style lang=\"scss\">\n  .car-config-wrap{\n    background: #fff;\n    .submit-btn{\n      margin-top: 10px;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/CarConfig.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"car-config-wrap\"},[_c('div',{staticClass:\"config-item\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"实时车辆显示内容:\")]),_c('el-select',{attrs:{\"placeholder\":\"选择车辆...\"},on:{\"change\":function($event){_vm.onCarChange(_vm.currentCar)}},model:{value:(_vm.currentCar),callback:function ($$v) {_vm.currentCar=$$v},expression:\"currentCar\"}},_vm._l((_vm.carList),function(item){return _c('el-option',{key:item.licenseNumber,attrs:{\"label\":item.licenseNumber,\"value\":item.licenseNumber}})})),_c('div',{staticClass:\"select\"},[_c('el-checkbox-group',{model:{value:(_vm.liveDisItms),callback:function ($$v) {_vm.liveDisItms=$$v},expression:\"liveDisItms\"}},_vm._l((_vm.catSettingList),function(item,index){return _c('el-checkbox',{key:index,attrs:{\"label\":item.settingName,\"value\":item.settingCode}})}))],1),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.currentCar},on:{\"click\":function($event){_vm.onCarSet()}}},[_vm._v(\"提交\")])],1),_c('div',{staticClass:\"config-item video-config\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"视频播放时长:\")]),_c('div',{staticClass:\"select\"},[_c('el-input-number',{attrs:{\"label\":\"视频播放时长\"},model:{value:(_vm.videoTime),callback:function ($$v) {_vm.videoTime=$$v},expression:\"videoTime\"}})],1),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onConfigSet}},[_vm._v(\"提交\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a6549bc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/CarConfig.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2a6549bc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!sass-resources-loader?{\\\"resources\\\":\\\"/Users/dt/Documents/study/map/car-monitor/src/core/styles/global.scss\\\"}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CarConfig.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CarConfig.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./CarConfig.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a6549bc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./CarConfig.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/CarConfig.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}