webpackJsonp([2],{i8ju:function(t,e){},rb7W:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),a=i("NYxO"),c=i("M4fF"),o=i.n(c),r=i("Ea+1"),l=i("znnA"),u=i("A/UQ"),g=i("IcnI");console.log(u.a);var f={data:function(){return{videoTime:0,currentCar:null,carList:[],liveDisItms:[],catSettingList:[{settingCode:"SHOWVEDIO",settingName:"是否显示视频"},{settingCode:"SHOWGOODS",settingName:"是否显示货物"},{settingCode:"SHOWTEM",settingName:"是否显示温度"}]}},components:{},watch:{configList:function(){this.getVideoTime()}},computed:s()({},Object(a.b)(["globalParams"]),{configList:function(){return this.globalParams.configList}}),created:function(){this.getCarList(),this.getVideoTime()},methods:{getVideoTime:function(){var t=0;this.configList.forEach(function(e){e.settingCode===u.a.VIDEO_PLAY_TIME&&(t=parseInt(e.value))}),this.videoTime=t},getCarList:function(){var t=this;r.a.main.getVehicles().then(function(e){var i=e.data;t.carList=i.data||[]}).catch(function(){return l.a.error("全局数据获取失败,请刷新重试~")})},onCarChange:function(t){var e=this;this.liveDisItms=[],this.carList.forEach(function(i){i.licenseNumber===t&&i.vehicleSettingModelList.forEach(function(t){t.value&&e.liveDisItms.push(t.settingName)})})},onCarSet:function(){var t=this;if(this.currentCar){var e={licenseNumber:this.currentCar,settingModels:[]};this.catSettingList.forEach(function(i){var n=i.settingCode,s=i.settingName;e.settingModels.push({settingCode:n,settingName:s,value:-1!==t.liveDisItms.indexOf(i.settingName)||""})}),r.a.config.setCarSetting(e).then(function(e){e.data;t.$message({message:"配置成功",type:"success",center:!0}),t.getCarList()})}},onConfigSet:function(){var t=this,e=o.a.cloneDeep(this.configList),i=!1;e.forEach(function(e){e.settingCode===u.a.VIDEO_PLAY_TIME&&(e.value=t.videoTime,i=!0)}),!i&&e.push({settingCode:u.a.VIDEO_PLAY_TIME,settingName:"视频播放时长",value:this.videoTime}),r.a.config.setGloblConfig(e).then(function(e){var i=e.data;g.a.dispatch("updateConfig",i.data),t.$message({message:"配置成功",type:"success",center:!0})})}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"car-config-wrap"},[i("div",{staticClass:"config-item"},[i("span",{staticClass:"text"},[t._v("实时车辆显示内容:")]),i("el-select",{attrs:{placeholder:"车辆"},on:{change:function(e){t.onCarChange(t.currentCar)}},model:{value:t.currentCar,callback:function(e){t.currentCar=e},expression:"currentCar"}},t._l(t.carList,function(t){return i("el-option",{key:t.licenseNumber,attrs:{label:t.licenseNumber,value:t.licenseNumber}})})),i("div",{staticClass:"select"},[i("el-checkbox-group",{model:{value:t.liveDisItms,callback:function(e){t.liveDisItms=e},expression:"liveDisItms"}},t._l(t.catSettingList,function(t,e){return i("el-checkbox",{key:e,attrs:{label:t.settingName,value:t.settingCode}})}))],1),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onCarSet()}}},[t._v("提交")])],1),i("div",{staticClass:"config-item video-config"},[i("span",{staticClass:"text"},[t._v("视频播放时长:")]),i("div",{staticClass:"select"},[i("el-input-number",{attrs:{label:"视频播放时长"},model:{value:t.videoTime,callback:function(e){t.videoTime=e},expression:"videoTime"}})],1),i("el-button",{attrs:{type:"primary"},on:{click:t.onConfigSet}},[t._v("提交")])],1)])},staticRenderFns:[]};var m=i("VU/8")(f,d,!1,function(t){i("i8ju")},null,null);e.default=m.exports}});
//# sourceMappingURL=2.972d7e01d43a703950a2.js.map